<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Brundavanam â€” Real Estate</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --brand: #17375a;
            --accent: #ffd166;
            --accent2: #fca311;
            --bg: #f7f9fc;
            --text: #1e2530;
            --card: #fff;
            --muted: #6b7789;
        }
        [data-theme="dark"] {
            --bg: #0f1217;
            --text: #e9eef6;
            --card: #151a21;
            --brand: #0f2a4a;
            --muted: #9aa7b9;
        }
        * {
            box-sizing: border-box;
        }
        html, body {
            scroll-behavior: smooth;
        }
        body {
            font-family: Poppins, system-ui, Segoe UI, Roboto, Helvetica, Arial;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }
        .navbar {
            background: linear-gradient(135deg, var(--brand), #3b6d9a);
            padding: 0.8rem 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .navbar-brand {
            color: var(--accent) !important;
            font-weight: 700;
            letter-spacing: .4px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
        }
        .navbar-brand i {
            margin-right: 8px;
        }
        .navbar .nav-link {
            color: #fff !important;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 0.5rem 1rem;
            border-radius: 50px;
        }
        .navbar .nav-link:hover {
            color: var(--accent) !important;
            background: rgba(255,255,255,0.1);
        }
        .toggle {
            color: #fff;
            border: 1px solid rgba(255, 255, 255, .25);
            border-radius: 999px;
            padding: .35rem .7rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .toggle:hover {
            background: rgba(255,255,255,0.1);
        }
        /* HERO */
        .hero {
            min-height: 85vh;
            display: grid;
            place-items: center;
            text-align: center;
            color: #fff;
            position: relative;
            overflow: hidden;
            margin-top: -76px;
            padding-top: 76px;
        }
        .hero::before {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(15, 24, 39, .75), rgba(10, 19, 35, .85)),
            url('https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=2070&auto=format&fit=crop') center/cover no-repeat;
            filter: saturate(1.05) contrast(1.05);
        }
        .hero > .inner {
            position: relative;
            padding: 4rem 1rem;
            max-width: 800px;
        }
        .hero h1 {
            font-weight: 700;
            font-size: clamp(2rem, 4.5vw, 3.5rem);
            line-height: 1.2;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
            margin-bottom: 1.5rem;
        }
        .hero p {
            opacity: 0.95;
            font-size: 1.2rem;
            margin-bottom: 2rem;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        .btn-accent {
            background: var(--accent);
            color: #15314f;
            border: none;
            border-radius: 999px;
            font-weight: 600;
            padding: 0.8rem 1.8rem;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .btn-accent:hover {
            background: var(--accent2);
            color: #fff;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.25);
        }
        /* SECTIONS */
        section {
            padding: 5rem 0;
        }
        .section-title {
            font-weight: 700;
            color: var(--brand);
            position: relative;
            display: inline-block;
            margin-bottom: 2.5rem;
            font-size: 2rem;
        }
        .section-title::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 70px;
            height: 4px;
            background: var(--accent);
            border-radius: 2px;
        }
        .subtext {
            color: var(--muted);
            font-size: 0.95rem;
        }
        /* SEARCH / FILTER BAR */
        .filter-wrap {
            margin-top: -2.8rem;
            position: relative;
            z-index: 10;
        }
        .filter-card {
            background: var(--card);
            border-radius: 18px;
            box-shadow: 0 12px 28px rgba(0,0,0,.08);
            padding: 1.5rem;
        }
        /* PROPERTY CARDS */
        .property-card {
            background: var(--card);
            border: 0;
            border-radius: 18px;
            overflow: hidden;
            box-shadow: 0 8px 22px rgba(0,0,0,.07);
            transition: transform .3s ease, box-shadow .3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        .property-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 14px 30px rgba(0,0,0,.12);
        }
        .badge-type {
            position: absolute;
            top: 12px;
            left: 12px;
            font-weight: 600;
            padding: 0.5rem 0.8rem;
            z-index: 1;
        }
        .price {
            font-weight: 700;
            color: #198754;
            font-size: 1.2rem;
        }
        .mini-carousel img {
            height: 220px;
            object-fit: cover;
            width: 100%;
        }
        .property-features {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 1rem 0;
        }
        .feature-badge {
            background: rgba(23, 55, 90, 0.1);
            color: var(--brand);
            border-radius: 50px;
            padding: 0.3rem 0.8rem;
            font-size: 0.85rem;
            font-weight: 500;
        }
        /* MAP */
        #map {
            height: 450px;
            border-radius: 18px;
            box-shadow: 0 8px 22px rgba(0,0,0,.07);
            overflow: hidden;
        }
        /* EMI */
        .emi-box {
            background: var(--card);
            border-radius: 18px;
            box-shadow: 0 6px 16px rgba(0,0,0,.08);
            padding: 2.5rem;
            height: 100%;
        }
        /* TESTIMONIALS */
        .testimonial-card {
            background: var(--card);
            border-radius: 18px;
            padding: 2rem;
            box-shadow: 0 6px 16px rgba(0,0,0,.05);
            position: relative;
            height: 100%;
        }
        .testimonial-card::before {
            content: """;
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 5rem;
            color: rgba(23, 55, 90, 0.1);
            font-family: Georgia, serif;
            line-height: 1;
        }
        /* FOOTER */
        footer {
            background: var(--brand);
            color: #fff;
            padding: 3rem 0 1.5rem;
        }
        .footer-links a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: all 0.3s ease;
            margin: 0 1rem;
        }
        .footer-links a:hover {
            color: var(--accent);
        }
        .social-links a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            color: #fff;
            margin: 0 0.5rem;
            transition: all 0.3s ease;
        }
        .social-links a:hover {
            background: var(--accent);
            color: var(--brand);
            transform: translateY(-3px);
        }
        /* FLOATING WA */
        .wa-float {
            position: fixed;
            right: 25px;
            bottom: 25px;
            z-index: 9999;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #25D366;
            color: #fff;
            font-size: 28px;
            box-shadow: 0 10px 24px rgba(0,0,0,.25);
            transition: transform .2s ease;
            animation: pulse 2s infinite;
        }
        .wa-float:hover {
            transform: scale(1.08);
            background: #128C7E;
            animation: none;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(37, 211, 102, 0); }
            100% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); }
        }
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .hero {
                min-height: 75vh;
            }
            .hero h1 {
                font-size: 2.2rem;
            }
            .hero p {
                font-size: 1rem;
            }
            section {
                padding: 3rem 0;
            }
            .filter-card {
                padding: 1rem;
            }
            .emi-box {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- NAV -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-house-heart-fill"></i>
                Brundavanam
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div id="nav" class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-2">
                    <li class="nav-item"><a class="nav-link" href="#listings">Listings</a></li>
                    <li class="nav-item"><a class="nav-link" href="#mapSection">Map</a></li>
                    <li class="nav-item"><a class="nav-link" href="#emi">EMI</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
                    <li class="nav-item ms-lg-2">
                        <button id="modeToggle" class="toggle btn btn-sm bg-transparent">
                            <i class="bi bi-moon-stars"></i> 
                            <span class="d-none d-sm-inline">Dark</span>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- HERO -->
    <header class="hero">
        <div class="inner container">
            <h1 class="mb-2">Premium Properties in & around Ongole</h1>
            <p class="lead mb-3">Discover your dream home with Brundavanam - Villas, Apartments & Plots designed for modern living</p>
            <a href="#listings" class="btn btn-accent btn-lg">
                <i class="bi bi-search"></i> Explore Listings
            </a>
        </div>
    </header>

    <!-- SEARCH BAR -->
    <div class="container filter-wrap">
        <div class="filter-card">
            <form id="filterForm" class="row g-2 align-items-end">
                <div class="col-12 col-md-4">
                    <label class="form-label mb-0">Property Type</label>
                    <select id="typeFilter" class="form-select">
                        <option value="all">All Types</option>
                        <option value="Villa">Villa</option>
                        <option value="Apartment">Apartment</option>
                        <option value="Plot">Plot</option>
                    </select>
                </div>
                <div class="col-6 col-md-3">
                    <label class="form-label mb-0">Max Price (â‚¹)</label>
                    <input id="priceFilter" type="number" class="form-control" placeholder="e.g. 80,00,000">
                </div>
                <div class="col-6 col-md-3">
                    <label class="form-label mb-0">Bedrooms</label>
                    <select id="bedsFilter" class="form-select">
                        <option value="any">Any</option>
                        <option value="2">2+</option>
                        <option value="3">3+</option>
                        <option value="4">4+</option>
                    </select>
                </div>
                <div class="col-12 col-md-2 d-grid d-md-flex gap-2">
                    <button class="btn btn-primary w-100 w-md-auto" type="submit">
                        <i class="bi bi-filter"></i> Apply
                    </button>
                    <button id="resetBtn" class="btn btn-outline-secondary w-100 w-md-auto" type="button">
                        <i class="bi bi-arrow-clockwise"></i> Reset
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- LISTINGS -->
    <section id="listings" class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="section-title m-0">Featured Properties</h2>
            <span class="subtext">Showing <span id="propertyCount">5</span> properties</span>
        </div>
        <div id="cardsRow" class="row g-4">
            <!-- Properties will be loaded here by JavaScript -->
        </div>
    </section>

    <!-- MAP -->
    <section id="mapSection" class="container">
        <h2 class="section-title mb-4">Explore Locations</h2>
        <div id="map" class="shadow-sm"></div>
    </section>

    <!-- EMI -->
    <section id="emi" class="container">
        <div class="row g-4">
            <div class="col-lg-6">
                <div class="emi-box">
                    <h2 class="section-title mb-3">EMI Calculator</h2>
                    <form id="emiForm" class="row g-3">
                        <div class="col-12">
                            <label class="form-label">Loan Amount (â‚¹)</label>
                            <input id="loanAmt" type="number" class="form-control" value="5000000">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Interest (p.a. %)</label>
                            <input id="rate" type="number" step="0.01" class="form-control" value="8.5">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Tenure (years)</label>
                            <input id="years" type="number" class="form-control" value="20">
                        </div>
                        <div class="col-12 mt-4">
                            <button class="btn btn-primary">
                                <i class="bi bi-calculator"></i> Calculate EMI
                            </button>
                        </div>
                        <div class="col-12 mt-3">
                            <div class="alert alert-success">
                                <h5 class="mb-0">Monthly EMI: <span id="emiOut">â‚¹42,718</span></h5>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-lg-6 d-flex align-items-center">
                <div>
                    <h3 class="mb-3">Why Choose Brundavanam?</h3>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item bg-transparent d-flex align-items-center">
                            <i class="bi bi-check-circle-fill text-success me-2"></i>
                            Verified titles & government approvals
                        </li>
                        <li class="list-group-item bg-transparent d-flex align-items-center">
                            <i class="bi bi-check-circle-fill text-success me-2"></i>
                            Transparent pricing with no hidden charges
                        </li>
                        <li class="list-group-item bg-transparent d-flex align-items-center">
                            <i class="bi bi-check-circle-fill text-success me-2"></i>
                            Personalized site visits & hand-holding
                        </li>
                        <li class="list-group-item bg-transparent d-flex align-items-center">
                            <i class="bi bi-check-circle-fill text-success me-2"></i>
                            Premium construction quality
                        </li>
                        <li class="list-group-item bg-transparent d-flex align-items-center">
                            <i class="bi bi-check-circle-fill text-success me-2"></i>
                            24/7 customer support
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- TESTIMONIALS -->
    <section class="container">
        <h2 class="section-title mb-4">What Our Clients Say</h2>
        <div class="row g-4">
            <div class="col-md-6">
                <div class="testimonial-card">
                    <p class="mb-3">"Got our dream home through Brundavanam. Their team was patient and guided us through every step. The documentation process was transparent and hassle-free."</p>
                    <div class="d-flex align-items-center">
                        <div class="me-3">
                            <div style="width:50px;height:50px;border-radius:50%;background:#17375a;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;">RK</div>
                        </div>
                        <div>
                            <span class="d-block fw-bold">Rajesh Kumar</span>
                            <span class="subtext">Resident of Skyline Villas</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="testimonial-card">
                    <p class="mb-3">"Brundavanam helped me find the perfect investment plot. Their market knowledge and honest advice saved me time and money. Highly recommend their services!"</p>
                    <div class="d-flex align-items-center">
                        <div class="me-3">
                            <div style="width:50px;height:50px;border-radius:50%;background:#17375a;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;">SP</div>
                        </div>
                        <div>
                            <span class="d-block fw-bold">Sunitha Patel</span>
                            <span class="subtext">Plot Owner in Green Meadows</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="p-4 p-md-5" style="background: var(--card); border-radius: 18px; box-shadow: 0 6px 16px rgba(0,0,0,.08);">
                    <h2 class="section-title mb-4">Get In Touch</h2>
                    <form id="contactForm" class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label">Your Name</label>
                            <input id="cName" type="text" class="form-control" placeholder="Enter your name" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Phone Number</label>
                            <input id="cContact" type="tel" class="form-control" placeholder="Enter your phone number" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Email Address</label>
                            <input id="cEmail" type="email" class="form-control" placeholder="Enter your email" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Interested In</label>
                            <select class="form-select">
                                <option>Villas</option>
                                <option>Apartments</option>
                                <option>Plots</option>
                                <option>Other</option>
                            </select>
                        </div>
                        <div class="col-12">
                            <label class="form-label">Message</label>
                            <textarea id="cMsg" class="form-control" rows="4" placeholder="Tell us about your requirements..." required></textarea>
                        </div>
                        <div class="col-12 d-flex gap-2 mt-4">
                            <button class="btn btn-success flex-grow-1" type="button" id="waQuick">
                                <i class="bi bi-whatsapp"></i> WhatsApp Now
                            </button>
                            <button class="btn btn-primary flex-grow-1" type="submit">
                                <i class="bi bi-send"></i> Send Message
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <h3 class="text-white mb-3">
                        <i class="bi bi-house-heart-fill me-2"></i>Brundavanam
                    </h3>
                    <p class="text-white-50">Premium real estate solutions in Ongole and surrounding areas. Trusted by hundreds of families since 2010.</p>
                    <div class="social-links mt-4">
                        <a href="#"><i class="bi bi-facebook"></i></a>
                        <a href="#"><i class="bi bi-instagram"></i></a>
                        <a href="#"><i class="bi bi-twitter-x"></i></a>
                        <a href="#"><i class="bi bi-youtube"></i></a>
                    </div>
                </div>
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <h4 class="text-white mb-4">Quick Links</h4>
                    <div class="footer-links d-flex flex-column">
                        <a href="#listings">Properties</a>
                        <a href="#mapSection">Location Map</a>
                        <a href="#emi">EMI Calculator</a>
                        <a href="#contact">Schedule a Visit</a>
                        <a href="#">Terms & Conditions</a>
                    </div>
                </div>
                <div class="col-lg-4">
                    <h4 class="text-white mb-4">Contact Info</h4>
                    <ul class="list-unstyled text-white-50">
                        <li class="mb-2"><i class="bi bi-geo-alt-fill me-2"></i> D.No: 5-88, Near Sai Baba Temple, Ongole</li>
                        <li class="mb-2"><i class="bi bi-telephone-fill me-2"></i> +91 79892 88815</li>
                        <li class="mb-2"><i class="bi bi-envelope-fill me-2"></i> info@brundavanam.com</li>
                        <li><i class="bi bi-clock-fill me-2"></i> Mon-Sat: 9:30 AM - 7:00 PM</li>
                    </ul>
                </div>
            </div>
            <hr class="my-4 bg-white-10">
            <div class="text-center text-white-50 pt-2">
                <p class="mb-0">Â© 2025 Brundavanam Real Estate. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Floating WhatsApp -->
    <a class="wa-float" href="https://wa.me/917989288815" target="_blank" aria-label="Chat on WhatsApp">
        <i class="bi bi-whatsapp"></i>
    </a>

    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        /* ------------------ DATA ------------------ */
        const PROPERTIES = [
            {
                id: "BV-101",
                type: "Villa",
                price: 9500000,
                beds: 4,
                title: "Skyline Villa â€” Kamepalli",
                photos: [
                    "https://images.unsplash.com/photo-1568605114967-8130f3a36994?q=80&w=1600&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1502005229762-cf1b2da7c52f?q=80&w=1600&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1507086182422-97bd7ca241e9?q=80&w=1600&auto=format&fit=crop"
                ],
                lat: 15.5815,
                lng: 80.0308,
                features: ["East Facing", "Private Garden", "2 Car Parks", "Modern Kitchen", "Swimming Pool"]
            },
            {
                id: "BA-204",
                type: "Apartment",
                price: 6200000,
                beds: 2,
                title: "Seabreeze Residency â€” Ongole",
                photos: [
                    "https://images.unsplash.com/photo-1493809842364-78817add7ffb?q=80&w=1600&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1505691723518-36a5ac3b2a59?q=80&w=1600&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1524758631624-e2822e304c36?q=80&w=1600&auto=format&fit=crop"
                ],
                lat: 15.5057,
                lng: 80.0499,
                features: ["Gym & Pool", "Covered Parking", "Power Backup", "24/7 Security", "Lift Access"]
            },
            {
                id: "BP-317",
                type: "Plot",
                price: 2800000,
                beds: 0,
                title: "Green Meadows Plot â€” Suburban",
                photos: [
                    "https://images.unsplash.com/photo-1500382017468-9049fed747ef?q=80&w=1600&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1519996529931-28324d5a6301?q=80&w=1600&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1425913397330-cf8af2ff40a1?q=80&w=1600&auto=format&fit=crop"
                ],
                lat: 15.5119,
                lng: 80.0154,
                features: ["200 sq. yd", "HMDA Layout", "Corner Plot", "Road Facing", "Clear Title"]
            },
            {
                id: "BA-221",
                type: "Apartment",
                price: 7400000,
                beds: 3,
                title: "Central Heights â€” City Core",
                photos: [
                    "https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?q=80&w=1600&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1523217582562-09d0def993a6?q=80&w=1600&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=1600&auto=format&fit=crop"
                ],
                lat: 15.5019,
                lng: 80.0416,
                features: ["High Street", "Clubhouse", "CCTV", "Children's Park", "Vaastu Compliant"]
            },
            {
                id: "BV-133",
                type: "Villa",
                price: 11500000,
                beds: 5,
                title: "Lakeview Villa â€” Outskirts",
                photos: [
                    "https://images.unsplash.com/photo-1507089947368-19c1da9775ae?q=80&w=1600&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1520880867055-1e30d1cb001c?q=80&w=1600&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1493666438817-866a91353ca9?q=80&w=1600&auto=format&fit=crop"
                ],
                lat: 15.5364,
                lng: 80.0219,
                features: ["Deck & Lawn", "Kids Play", "Servant Room", "Solar Power", "Smart Home"]
            }
        ];

        /* ------------------ UTIL ------------------ */
        const INR = n => new Intl.NumberFormat('en-IN', {
            style: 'currency',
            currency: 'INR',
            maximumFractionDigits: 0
        }).format(n);

        /* ------------------ RENDER CARDS ------------------ */
        function renderCards(list) {
            const row = document.getElementById('cardsRow');
            row.innerHTML = '';
            document.getElementById('propertyCount').textContent = list.length;
            
            list.forEach((p, i) => {
                const wa = `https://wa.me/917989288815?text=${encodeURIComponent(
                    `Hi Brundavanam, I'm interested in ${p.title} (${p.id}) priced at ${INR(p.price)}.`
                )}`;
                
                const col = document.createElement('div');
                col.className = 'col-md-6 col-lg-4';
                const carouselId = `mini-${p.id}`;
                
                col.innerHTML = `
                    <div class="property-card h-100">
                        <div class="position-relative">
                            <span class="badge text-bg-dark badge-type">${p.type}</span>
                            <div id="${carouselId}" class="carousel slide" data-bs-ride="carousel">
                                <div class="carousel-inner">
                                    ${p.photos.map((ph, idx) => `
                                        <div class="carousel-item ${idx === 0 ? 'active' : ''}">
                                            <img src="${ph}" class="d-block w-100" alt="${p.title}" style="height: 220px;">
                                        </div>
                                    `).join('')}
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#${carouselId}" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Previous</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#${carouselId}" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Next</span>
                                </button>
                            </div>
                        </div>
                        <div class="p-3 flex-grow-1 d-flex flex-column">
                            <h5 class="mb-1">${p.title}</h5>
                            <div class="d-flex justify-content-between align-items-center mt-2">
                                <div class="price">${INR(p.price)}</div>
                                <small class="subtext">${p.beds ? `${p.beds} BHK` : 'Plot'}</small>
                            </div>
                            <div class="property-features mt-3">
                                ${p.features.slice(0, 3).map(f => `<span class="feature-badge">${f}</span>`).join('')}
                                ${p.features.length > 3 ? `<span class="feature-badge">+${p.features.length - 3} more</span>` : ''}
                            </div>
                            <div class="d-flex gap-2 mt-auto pt-3">
                                <a class="btn btn-success flex-grow-1" target="_blank" href="${wa}">
                                    <i class="bi bi-whatsapp"></i> Enquire
                                </a>
                                <button class="btn btn-outline-primary" title="Show on map" onclick='focusMarker(${i})'>
                                    <i class="bi bi-geo-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                row.appendChild(col);
            });
        }

        /* ------------------ FILTERS ------------------ */
        function applyFilters(e) {
            if (e) e.preventDefault();
            const t = document.getElementById('typeFilter').value;
            const max = parseInt(document.getElementById('priceFilter').value || '0', 10);
            const beds = document.getElementById('bedsFilter').value;
            
            const filtered = PROPERTIES.filter(p => {
                const okType = t === 'all' || p.type === t;
                const okPrice = max ? p.price <= max : true;
                const okBeds = beds === 'any' || (p.beds >= parseInt(beds, 10));
                return okType && okPrice && okBeds;
            });
            
            renderCards(filtered);
            plotMarkers(filtered);
        }
        
        function resetFilters() {
            document.getElementById('typeFilter').value = 'all';
            document.getElementById('priceFilter').value = '';
            document.getElementById('bedsFilter').value = 'any';
            renderCards(PROPERTIES);
            plotMarkers(PROPERTIES);
        }

        /* ------------------ CONTACT -> WHATSAPP ------------------ */
        function openWAFromForm() {
            const name = document.getElementById("cName").value.trim();
            const contact = document.getElementById("cContact").value.trim();
            const msg = document.getElementById("cMsg").value.trim();
            const text = `Hi Brundavanam, I'm ${name} (${contact}). ${msg}`;
            window.open(`https://wa.me/917989288815?text=${encodeURIComponent(text)}`, '_blank');
        }

        /* ------------------ EMI CALC ------------------ */
        function calcEMI(e) {
            e.preventDefault();
            const P = +document.getElementById('loanAmt').value;
            const r = (+document.getElementById('rate').value) / 1200;
            const n = (+document.getElementById('years').value) * 12;
            
            if (P > 0 && r > 0 && n > 0) {
                const emi = P * r * Math.pow(1 + r, n) / (Math.pow(1 + r, n) - 1);
                document.getElementById('emiOut').textContent = INR(Math.round(emi));
            }
        }

        /* ------------------ DARK MODE ------------------ */
        const root = document.documentElement;
        const saved = localStorage.getItem('theme');
        if (saved) root.setAttribute('data-theme', saved);
        
        document.getElementById('modeToggle').addEventListener('click', () => {
            const currentTheme = root.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            if (newTheme === 'light') {
                root.removeAttribute('data-theme');
            } else {
                root.setAttribute('data-theme', 'dark');
            }
            
            localStorage.setItem('theme', newTheme);
            
            // Update button text
            const btn = document.getElementById('modeToggle');
            const icon = btn.querySelector('i');
            const span = btn.querySelector('span');
            
            if (newTheme === 'dark') {
                icon.className = 'bi bi-sun-fill';
                span.textContent = 'Light';
            } else {
                icon.className = 'bi bi-moon-stars';
                span.textContent = 'Dark';
            }
        });

        /* ------------------ MAP ------------------ */
        // This is a simplified version since we can't load actual Google Maps without an API key
        function initMap() {
            const mapEl = document.getElementById('map');
            mapEl.innerHTML = `
                <div style="width:100%;height:100%;background:url('https://images.unsplash.com/photo-1582407947304-fd86f028f716?q=80&w=2069&auto=format&fit=crop') center/cover;border-radius:18px;display:flex;align-items:center;justify-content:center;">
                    <div style="background:rgba(255,255,255,0.9);padding:2rem;border-radius:12px;text-align:center;max-width:80%;">
                        <h4 class="mb-3">Property Locations</h4>
                        <p class="mb-4">Map functionality requires a Google Maps API key. For demonstration, here are our property locations:</p>
                        <div class="d-flex flex-wrap justify-content-center gap-3">
                            ${PROPERTIES.map(p => `
                                <div class="bg-light p-2 rounded">
                                    <strong>${p.title}</strong><br>
                                    <small>${INR(p.price)}</small>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }
        
        function plotMarkers(list) {
            // In a real implementation, this would update map markers
        }
        
        function focusMarker(index) {
            const property = PROPERTIES[index];
            alert(`Focusing on property: ${property.title}\nLocation: ${property.lat}, ${property.lng}`);
        }

        /* ------------------ INITIALIZE ------------------ */
        document.addEventListener('DOMContentLoaded', function() {
            // Render initial property cards
            renderCards(PROPERTIES);
            
            // Setup filters
            document.getElementById('filterForm').addEventListener('submit', applyFilters);
            document.getElementById('resetBtn').addEventListener('click', resetFilters);
            
            // Setup EMI calculator
            document.getElementById('emiForm').addEventListener('submit', calcEMI);
            
            // Setup contact form
            document.getElementById('waQuick').addEventListener('click', openWAFromForm);
            document.getElementById('contactForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Thank you for your message! We will contact you shortly.');
                this.reset();
            });
            
            // Initialize map
            initMap();
            
            // Set initial dark mode button
            if (localStorage.getItem('theme') === 'dark') {
                const btn = document.getElementById('modeToggle');
                const icon = btn.querySelector('i');
                const span = btn.querySelector('span');
                icon.className = 'bi bi-sun-fill';
                span.textContent = 'Light';
            }
        });
    </script>
</body>
</html>